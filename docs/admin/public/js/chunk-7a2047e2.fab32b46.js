(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a2047e2"],{"2ab8":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("div",{staticClass:"bg"},[o("el-dialog",{attrs:{"custom-class":"login-dialog",visible:e.loginModal,width:"300px",modal:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1}},[o("div",{staticStyle:{"text-align":"center"},attrs:{slot:"title"},slot:"title"},[o("h1",[o("span",[e._v(e._s(e.title))])]),o("div",{staticStyle:{height:"20px"}},[o("span",{staticStyle:{"text-align":"center","font-size":"x-small"}},[e._v("v"+e._s(e.version))])])]),o("div",[o("el-form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate},nativeOn:{submit:function(e){e.preventDefault()}}},[o("el-form-item",[o("el-input",{staticStyle:{display:"none"},attrs:{type:"password"}})],1),o("el-form-item",{attrs:{prop:"loginNo"}},[o("el-input",{ref:"loginNo",attrs:{type:"text",disabled:e.modal_loading,placeholder:e.text.usernamePlaceholder,"prefix-icon":"el-icon-user"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit("formValidate")}},model:{value:e.formValidate.loginNo,callback:function(t){e.$set(e.formValidate,"loginNo",t)},expression:"formValidate.loginNo"}})],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{disabled:e.modal_loading,placeholder:e.text.passwordPlaceholder,"prefix-icon":"el-icon-lock",autocomplete:"off",type:"text"},on:{focus:e.passwordFocus},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit("formValidate")}},model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}})],1),o("el-form-item",{staticStyle:{"margin-bottom":"0"}},[o("el-checkbox",{attrs:{disabled:e.modal_loading},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit("formValidate")}},model:{value:e.formValidate.remember,callback:function(t){e.$set(e.formValidate,"remember",t)},expression:"formValidate.remember"}},[e._v("\n              "+e._s(e.text.rememberMe)+"\n            ")])],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.modal_loading},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("\n          "+e._s(e.$t("forms.buttons.login"))+"\n        ")]),o("small",{staticStyle:{"text-align":"center",display:"block","margin-top":"10px"}},[e._v(e._s(e.copyright))])],1)])],1)])},s=[],i=(o("a481"),o("7f7f"),o("76fe"),{name:"login",data:function(){return{title:this.$store.state.app.appInfo.appName,version:this.$store.state.app.appInfo.appVersion,copyright:this.$store.state.app.appInfo.copyright,homePath:this.$store.state.app.appInfo.homePath,text:{usernamePlaceholder:this.$i18n.t("forms.pleaseEnter")+this.$i18n.t("forms.loginNo"),passwordPlaceholder:this.$i18n.t("forms.pleaseEnter")+this.$i18n.t("forms.password"),rememberMe:this.$i18n.t("forms.rememberMe")},loginModal:!0,modal_loading:!1,formValidate:{loginNo:this.$store.state.app.user.loginNo,password:"",remember:this.$store.state.app.user.remember},ruleValidate:{loginNo:[{required:!0,message:this.$i18n.t("forms.loginNo")+this.$i18n.t("forms.notEmpty"),trigger:"blur"}],password:[{required:!0,message:this.$i18n.t("forms.password")+this.$i18n.t("forms.notEmpty"),trigger:"blur"}]}}},methods:{passwordFocus:function(e){e.target.type="password"},handleSubmit:function(e){var t=this,o=this;o.$refs[e].validate(function(e){e&&(o.modal_loading=!0,o.$api.request.auth.doLogin(o.formValidate.loginNo,o.formValidate.password).then(function(e){if(e)if(e.data.access_token){o.$message.success(o.$i18n.t("messages.loginSuccess")+""),o.$store.commit("SET_TOKEN",e.data.access_token),o.$store.commit("SET_TOKEN_TYPE",e.data.token_type),o.$store.commit("SET_SCOPE",e.data.scope),o.formValidate.remember?o.$store.commit("SET_LOGIN_NO",o.formValidate.loginNo):o.$store.commit("SET_LOGIN_NO",""),o.$store.commit("SET_REMEMBER",o.formValidate.remember);var a=t.homePath;o.$route.params.redirect&&(a=o.$route.params.redirect),o.$router.replace(a)}else o.$api.errorProcess(o.$i18n.t("messages.loginInvalid"),o.$i18n.t("messages.loginFailed"));o.modal_loading=!1}).catch(function(e){o.modal_loading=!1,e.response&&e.response.status&&400===e.response.status?o.$api.errorProcess(o.$i18n.t("messages.loginInvalid"),o.$i18n.t("messages.loginFailed")):o.$api.errorProcess(o.$i18n.t("messages.failed403"),o.$i18n.t("messages.loginFailed"))}))})}},mounted:function(){var e=this;this.$nextTick(function(){e.$refs["loginNo"].focus()})}}),r=i,n=o("2877"),l=Object(n["a"])(r,a,s,!1,null,null,null);t["default"]=l.exports},"76fe":function(e,t,o){}}]);