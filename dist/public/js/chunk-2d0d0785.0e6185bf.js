(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0785"],{"67b0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"60px",inline:!0,size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$t("forms.name"),prop:"name"}},[a("el-input",{attrs:{disabled:e.modal_loading,placeholder:e.$t("forms.pleaseEnter")+e.$t("forms.name")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("el-form-item",{attrs:{label:e.$t("forms.value"),prop:"value"}},[a("el-input",{attrs:{disabled:e.modal_loading,placeholder:e.$t("forms.pleaseEnter")+e.$t("forms.value")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.searchForm.value,callback:function(t){e.$set(e.searchForm,"value",t)},expression:"searchForm.value"}})],1),a("el-form-item",{attrs:{label:e.$t("forms.status"),prop:"enabled"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{clearable:!0,disabled:e.modal_loading,value:""},model:{value:e.searchForm.enabled,callback:function(t){e.$set(e.searchForm,"enabled",t)},expression:"searchForm.enabled"}},e._l(e.enabledList,function(e){return a("el-option",{key:"search_select_"+e.value,attrs:{value:e.value,label:e.label}})}),1)],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button-group",[a("el-button",{attrs:{loading:e.modal_loading,type:"primary"},on:{click:function(t){return e.handleSearch()}}},[e._v("\n          "+e._s(e.$t("forms.buttons.search"))+"\n        ")]),a("el-button",{attrs:{loading:e.modal_loading,type:"primary"},on:{click:function(t){return e.handleSearchReset("searchForm")}}},[e._v("\n          "+e._s(e.$t("forms.buttons.reset"))+"\n        ")]),a("el-button",{attrs:{loading:e.modal_loading,type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("\n          "+e._s(e.$t("forms.buttons.add"))+"\n        ")]),a("el-button",{attrs:{loading:e.modal_loading,type:"primary"},on:{click:function(t){return e.handleDeleteMore()}}},[e._v("\n          "+e._s(e.$t("forms.buttons.delete"))+"\n        ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.modal_loading,expression:"modal_loading"}],ref:"table",attrs:{border:"",height:e.tableHeight,size:"mini","default-sort":e.searchForm.orderParam,data:e.searchData,"empty-text":e.$t("messages.tableNoData"),"header-cell-class-name":"query-table-header"},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelect,"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",align:"center",width:"40"}}),a("el-table-column",{attrs:{prop:"name",sortable:"custom",label:this.$i18n.t("forms.name")}}),a("el-table-column",{attrs:{prop:"value",label:this.$i18n.t("forms.value")},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editIndex===t.$index?a("el-input",{attrs:{type:"text"},nativeOn:{keyup:[function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSave(t.$index)},function(t){return e.handleCancel(t)}]},model:{value:e.editValue,callback:function(t){e.editValue=t},expression:"editValue"}}):a("span",[e._v(e._s(t.row.value))])]}}])}),a("el-table-column",{attrs:{prop:"configDes",label:this.$i18n.t("forms.describe")},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editIndex===t.$index?a("el-input",{attrs:{type:"text"},nativeOn:{keyup:[function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSave(t.$index)},function(t){return e.handleCancel(t)}]},model:{value:e.editDes,callback:function(t){e.editDes=t},expression:"editDes"}}):a("span",[e._v(e._s(t.row.configDes))])]}}])}),a("el-table-column",{attrs:{prop:"enabled",align:"center",sortable:"custom",width:"100",label:this.$i18n.t("forms.enabled")},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editIndex===t.$index?a("el-switch",{attrs:{disabled:e.modal_loading},nativeOn:{keyup:function(a){return e.handleKeyUp(a,t.$index)}},model:{value:e.editEnabled,callback:function(t){e.editEnabled=t},expression:"editEnabled"}}):a("span",{style:t.row.enabled?"color:green":"color:red"},[e._v(e._s(e.enabledText(t.row.enabled)))])]}}])}),a("el-table-column",{attrs:{prop:"action",label:this.$i18n.t("forms.action"),align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editIndex===t.$index?a("div",[a("el-tooltip",{attrs:{content:e.$t("forms.buttons.save"),placement:"top-start"}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleSave(t.$index)}}},[a("i",{staticClass:"el-icon-check",staticStyle:{"font-size":"15px",color:"green"}})])],1),a("el-tooltip",{attrs:{content:e.$t("forms.buttons.cancel"),placement:"top-start"}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.editIndex=-1}}},[a("i",{staticClass:"el-icon-close",staticStyle:{"font-size":"15px",color:"red"}})])],1)],1):a("div",[a("el-tooltip",{attrs:{content:e.$t("forms.buttons.edit"),placement:"top-start"}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t.row,t.$index)}}},[a("i",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px"}})])],1),t.row.covert?a("el-tooltip",{attrs:{content:e.$t("forms.buttons.delete"),placement:"top-start"}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDeleteRow(t.row)}}},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"15px"}})])],1):e._e()],1)]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.searchForm.currPage,"page-sizes":e.searchForm.pageSizeArray,"page-size":e.searchForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.searchForm.totalRows},on:{"size-change":e.handlePageSizeSearch,"current-change":e.handlePageSearch}}),a("el-dialog",{attrs:{visible:e.addModal,title:e.$t("forms.buttons.add"),"close-on-click-modal":!1},on:{"update:visible":function(t){e.addModal=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.modal_loading,expression:"modal_loading"}],ref:"addForm",staticStyle:{"padding-right":"25px"},attrs:{model:e.addForm,rules:e.ruleAddForm,"label-width":"60px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$t("forms.name"),prop:"name"}},[a("el-input",{ref:"name",attrs:{disabled:e.modal_loading,placeholder:e.$t("forms.pleaseEnter")+e.$t("forms.name")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doAdd("addForm")}},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:e.$t("forms.value"),prop:"value"}},[a("el-input",{attrs:{disabled:e.modal_loading,placeholder:e.$t("forms.pleaseEnter")+e.$t("forms.value")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doAdd("addForm")}},model:{value:e.addForm.value,callback:function(t){e.$set(e.addForm,"value",t)},expression:"addForm.value"}})],1),a("el-form-item",{attrs:{label:e.$t("forms.describe"),prop:"describe"}},[a("el-input",{attrs:{disabled:e.modal_loading,placeholder:e.$t("forms.pleaseEnter")+e.$t("forms.describe")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doAdd("addForm")}},model:{value:e.addForm.describe,callback:function(t){e.$set(e.addForm,"describe",t)},expression:"addForm.describe"}})],1),a("el-form-item",{attrs:{label:e.$t("forms.enabled"),prop:"enabled"}},[a("el-switch",{attrs:{disabled:e.modal_loading},model:{value:e.addForm.enabled,callback:function(t){e.$set(e.addForm,"enabled",t)},expression:"addForm.enabled"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",loading:e.modal_loading},on:{click:function(t){return e.doCancel()}}},[e._v("\n        "+e._s(e.$t("forms.buttons.cancel"))+"\n      ")]),a("el-button",{attrs:{type:"primary",loading:e.modal_loading},on:{click:function(t){return e.doAdd("addForm")}}},[e._v("\n        "+e._s(e.$t("forms.buttons.submit"))+"\n      ")])],1)],1)],1)},r=[],l=(a("7f7f"),{name:"runtimeConfig",data:function(){return{searchForm:{name:"",value:"",enabled:"",orderParam:{prop:"name",order:"ascending"},currPage:1,totalRows:0,pageSize:10,pageSizeArray:[10,20,30,40]},addForm:{name:"",value:"",describe:"",enabled:!0},addModal:!1,modal_loading:!1,searchData:[],editIndex:-1,editName:"",editValue:"",editDes:"",editEnabled:!0,selectedData:[]}},watch:{addModal:function(e){var t=this;e&&this.$nextTick(function(){t.$refs["name"].focus()})}},computed:{tableHeight:function(){var e=300,t=this.$store.state.app.mainHeight-80-46-42-4;return t<e?e-2:t},enabledList:function(){return[{value:"true",label:this.$i18n.t("forms.enabled")},{value:"false",label:this.$i18n.t("forms.disabled")}]},ruleAddForm:function(){return{name:[{required:!0,message:this.$i18n.t("forms.name")+this.$i18n.t("forms.notEmpty"),trigger:"blur"}]}}},methods:{enabledText:function(e){return e?this.$i18n.t("forms.enabled"):this.$i18n.t("forms.disabled")},handleAdd:function(){var e=this;this.addModal=!0,this.$nextTick(function(){e.$refs["addForm"].resetFields()})},doCancel:function(){this.addModal=!1},doAdd:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.modal_loading=!0,t.$api.request.runtime.create({name:t.addForm.name,value:t.addForm.value,configDes:t.addForm.describe,enabled:t.addForm.enabled}).then(function(e){t.modal_loading=!1,e&&(t.$message.success(t.$i18n.t("messages.saveSuccess")+""),t.addModal=!1,t.handleSearch())}).catch(function(){t.modal_loading=!1}))})},handleDelete:function(e){var t=this;this.modal_loading=!0,this.$api.request.runtime.delete(e).then(function(e){t.modal_loading=!1,e&&(t.$message.success(t.$i18n.t("messages.deleteSuccess")+""),t.handleSearch())}).catch(function(){t.modal_loading=!1})},handleSave:function(e){var t=this;this.modal_loading=!0,this.$api.request.runtime.update({id:this.searchData[e].id,name:this.editName,value:this.editValue,configDes:this.editDes,enabled:this.editEnabled}).then(function(a){t.modal_loading=!1,a&&(t.searchData[e].value=t.editValue,t.searchData[e].configDes=t.editDes,t.searchData[e].enabled=t.editEnabled,t.editIndex=-1,t.$message.success(t.$i18n.t("messages.updateSuccess")+""))}).catch(function(){t.modal_loading=!1})},handlePageSearch:function(e){this.searchForm.currPage=e,this.handleSearch()},handlePageSizeSearch:function(e){this.searchForm.pageSize=e,this.handleSearch()},handleSearch:function(){var e=this,t={name:this.searchForm.name,value:this.searchForm.value,queryParam:{currPage:this.searchForm.currPage,pageSize:this.searchForm.pageSize}};"true"===this.searchForm.enabled?t.enabled=!0:"false"===this.searchForm.enabled&&(t.enabled=!1),"normal"!==this.searchForm.orderParam.order&&(t.queryParam.orderName=this.searchForm.orderParam.prop,t.queryParam.orderCommond=this.searchForm.orderParam.order),this.modal_loading=!0,this.$api.request.runtime.query(t).then(function(t){e.modal_loading=!1,t&&(e.selectedData=[],e.searchForm.currPage=t.data.pageable.pageNumber+1,e.searchForm.totalRows=t.data.totalElements,e.searchData=t.data.content.map(function(e){return e.covert||(e._disabled=!0),e}),e.$nextTick(function(){e.$refs["table"].doLayout()}))}).catch(function(){e.searchData=[],e.selectedData=[],e.modal_loading=!1})},handleRowClick:function(e){this.$refs["table"].toggleRowSelection(e)},handleSortChange:function(e){this.searchForm.orderParam.prop=e.prop,this.searchForm.orderParam.order=e.order,this.handleSearch()},handleSearchReset:function(e){this.$refs[e].resetFields()},handleSelect:function(e){this.selectedData=e},handleDeleteRow:function(e){var t=this;e.covert?this.$confirm(this.$i18n.t("messages.deleteDataConfirm")+"",this.$i18n.t("dialog.confirm")+"",{type:"warning"}).then(function(){t.handleDelete([e.id])}).catch(function(){}):this.$alert(this.$i18n.t("messages.tableDataCannotDel")+"",this.$i18n.t("dialog.error")+"",{type:"error"})},handleDeleteMore:function(){var e=this;this.selectedData.length>0?this.$confirm(this.$i18n.t("messages.deleteDataConfirm")+"",this.$i18n.t("dialog.confirm")+"",{type:"warning"}).then(function(){e.handleDelete(e.selectedData.map(function(e){return e.id}))}).catch(function(){}):this.$alert(this.$i18n.t("messages.selectDataForDelete")+"",this.$i18n.t("dialog.info")+"",{type:"error"})},handleEdit:function(e,t){this.editName=e.name,this.editValue=e.value,this.editDes=e.configDes,this.editEnabled=!!e.enabled,this.editIndex=t},handleKeyUp:function(e,t){switch(e.which){case 13:this.handleSave(t);break;case 27:this.editIndex=-1;break}},handleCancel:function(e){27===e.which&&(this.editIndex=-1)}},mounted:function(){this.handleSearch()},activated:function(){var e=this;this.$nextTick(function(){e.$refs["table"].doLayout()})}}),o=l,i=a("2877"),s=Object(i["a"])(o,n,r,!1,null,null,null);t["default"]=s.exports}}]);